(this["webpackJsonpreact-firebase"]=this["webpackJsonpreact-firebase"]||[]).push([[0],{46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(2),c=(n(42),n(1)),s=n.n(c),r=n(36),l=n.n(r),o=(n(46),n(20)),i=n(11),j=n(16),m=n(5),d="/login",u="/dashboard",b="/dashboard/admin",h=function(e){e.user;return Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navvar-dark bg-dark text-light d-flex justify-content-between",children:[Object(a.jsx)("h1",{className:"navbar-brand",children:"RCP"}),Object(a.jsxs)("ul",{className:"navbar-nav",children:[Object(a.jsx)("li",{className:"nav-item nav-link",children:Object(a.jsx)(j.b,{to:b,children:"Admin"})}),Object(a.jsx)("li",{className:"nav-item nav-link",children:Object(a.jsx)(j.b,{to:u,children:"Dashboard"})}),Object(a.jsx)("li",{className:"nav-item nav-link",children:Object(a.jsx)(j.b,{to:d,children:"Log out"})})]})]})},O=n(21),x=n.n(O),p=n(28),f=n(24);n(52),n(56);f.a.initializeApp({apiKey:"AIzaSyDGKkO0Uxa71BIY-XTqN7FG08i3SWXYcnI",authDomain:"inz-proto.firebaseapp.com",projectId:"inz-proto",storageBucket:"inz-proto.appspot.com",messagingSenderId:"241503422888",appId:"1:241503422888:web:64093243936c23dca8359d",measurementId:"G-M37DH32FT8"});f.a.auth();var v=f.a.firestore(),N=function(){var e=Object(p.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.collection("users").doc(t).get().then((function(e){e.exists?n(e.data()):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(x.a.mark((function e(t,n,a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.auth().createUserWithEmailAndPassword(t,n).then((function(e){v.collection("users").doc(e.user.uid).set(a)})).catch((function(e){var t=e.message;alert(t),console.log(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),y=function(e){var t=e.toggleForm,n=Object(c.useState)(""),s=Object(i.a)(n,2),r=s[0],l=s[1],o=Object(c.useState)(""),j=Object(i.a)(o,2),m=j[0],d=j[1],u=Object(c.useState)({name:"",lastName:"",type:"user"}),b=Object(i.a)(u,2),h=b[0],O=b[1],x=function(e){"email"===e.target.id?l(e.target.value):d(e.target.value)};return Object(a.jsxs)("form",{className:"",children:[Object(a.jsxs)("div",{className:"form-row",children:[Object(a.jsxs)("div",{className:"form-group col-md-3",children:[Object(a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Login"}),Object(a.jsx)("input",{type:"email",className:"form-control",value:r,onChange:x,id:"email"})]}),Object(a.jsxs)("div",{className:"form-group col-md-3",children:[Object(a.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(a.jsx)("input",{autoComplete:"off",type:"password",className:"form-control",value:m,onChange:x,id:"password"})]})]}),Object(a.jsxs)("div",{className:"form-row",children:[Object(a.jsxs)("div",{className:"form-group col-md-2",children:[Object(a.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"name",value:h.name,onChange:function(e){O(Object.assign({},h,{name:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"form-group col-md-2",children:[Object(a.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"lastName",value:h.lastName,onChange:function(e){O(Object.assign({},h,{lastName:e.target.value}))}})]}),Object(a.jsxs)("div",{className:"form-group col-md-2",children:[Object(a.jsx)("label",{htmlFor:"type",className:"form-label",children:"Type"}),Object(a.jsxs)("select",{type:"text",className:"form-control",id:"type",value:h.type,onChange:function(e){O(Object.assign({},h,{type:e.target.value}))},children:[Object(a.jsx)("option",{value:"user",children:"user"}),Object(a.jsx)("option",{value:"admin",children:"admin"})]})]})]}),Object(a.jsx)("button",{className:"btn btn-success",onClick:function(e){return function(e){e.preventDefault(),g(r,m,h),t(!1)}(e)},children:"Add"})]})},w=n(17),C=function(e){var t=e.item,n=Object(c.useState)(!1),s=Object(i.a)(n,2),r=s[0],l=s[1];return Object(a.jsx)("li",{className:"list-group-item",children:Object(a.jsx)(w.c,{initialValues:{name:t.name,lastName:t.lastName,type:t.type},onSubmit:function(e){var n,a,c,s;n=t.id,a=e.name,c=e.lastName,s=e.type,v.collection("users").doc(n).set({name:a,lastName:c,type:s}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))},children:function(e){e.errors,e.touched;var n=e.handleBlur,c=e.handleChange,s=e.values;return Object(a.jsx)(w.b,{children:Object(a.jsxs)("span",{className:"row",children:[Object(a.jsx)("span",{className:"col-3 col-md-3",children:r?Object(a.jsx)(w.a,{name:"name",type:"text",className:"form-control"}):Object(a.jsx)("p",{children:t.name})}),Object(a.jsx)("span",{className:"col-4 col-md-3",children:r?Object(a.jsx)(w.a,{name:"lastName",type:"text",className:"form-control"}):Object(a.jsx)("p",{children:t.lastName})}),Object(a.jsx)("span",{className:"col-3 col-md-3",children:r?Object(a.jsxs)("select",{name:"type",className:"form-control",value:s.type,onChange:c,onBlur:n,children:[Object(a.jsx)("option",{value:"user",label:"user"}),Object(a.jsx)("option",{value:"admin",label:"admin"})]}):Object(a.jsx)("p",{children:t.type})}),r?Object(a.jsx)("button",{className:"btn btn-success mr-3",onClick:function(){return l(!r)},children:"save"}):Object(a.jsx)("button",{className:"btn btn-primary mr-3",onClick:function(){return l(!r)},children:"update"}),r?Object(a.jsx)("button",{className:"btn btn-danger",type:"submit",onClick:function(){return l(!r)},children:"cancel"}):Object(a.jsx)("button",{className:"btn btn-danger",children:"delete"})]})})}})})},k=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),l=Object(i.a)(r,2),o=l[0],j=l[1];return Object(c.useEffect)((function(){var e;e=s,v.collection("users").onSnapshot((function(t){e(t.docs.map((function(e){return Object.assign({},e.data(),{id:e.id})})))}))}),[]),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("h1",{children:"Admin"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("ul",{className:"list-group",children:[Object(a.jsx)("li",{className:"list-group-item active",children:Object(a.jsxs)("span",{className:"row",children:[Object(a.jsx)("span",{className:"col-3 col-md-3",children:"First name"}),Object(a.jsx)("span",{className:"col-4 col-md-3",children:"Last name"}),Object(a.jsx)("span",{className:"col-3 col-md-3",children:"Type"})]})}),n.length>0?n.map((function(e,t){return Object(a.jsx)(C,{item:e},t)})):null]}),Object(a.jsx)("button",{className:"btn ".concat(o?"btn-danger":"btn-success"," mt-3"),onClick:function(){return j(!o)},children:o?"Cancel":"Add user"}),o?Object(a.jsx)(y,{toggleForm:j}):null]})]})})},F=function(e){var t=e.currentUser,n=Object(c.useState)(null),s=Object(i.a)(n,2),r=s[0],l=s[1];return Object(c.useEffect)((function(){N(null===t||void 0===t?void 0:t.user.uid,l)}),[t]),Object(a.jsxs)("div",{children:[Object(a.jsx)(h,{}),null===r?Object(a.jsx)("h1",{children:"loading..."}):Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(m.b,{path:b,component:k})})]})},S=function(e){var t=e.setCurrentUser,n=e.history;return Object(a.jsx)("div",{children:Object(a.jsx)(w.c,{initialValues:{email:"",password:""},onSubmit:function(e){!function(e,t,n,a){f.a.auth().signInWithEmailAndPassword(e,t).then((function(e){return n(e)})).then((function(){return a.push("/dashboard")})).catch((function(e){var t=e.message;alert(t)}))}(e.email,e.password,t,n)},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<6&&(t.password="Password must be 6 characters long"):t.password="Required",t},children:function(e){var t=e.errors,n=e.touched;return Object(a.jsxs)(w.b,{className:"col-md-6 offset-md-3 min-vh-100 d-flex flex-column justify-content-center",children:[Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(a.jsx)(w.a,{name:"email",type:"email",className:"form-control"}),Object(a.jsx)("div",{className:"text-danger",style:{minHeight:34},children:t.email&&n.email?t.email:""})]}),Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(a.jsx)(w.a,{name:"password",type:"password",className:"form-control"}),Object(a.jsx)("div",{className:"text-danger",style:{minHeight:34},children:t.password&&n.password?t.password:""})]}),Object(a.jsx)("button",{className:"btn btn-primary col-md-3",type:"submit",children:"Log in"})]})}})})},A=function(){return Object(a.jsxs)("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center",children:[Object(a.jsx)("h3",{children:"404 page not found"}),Object(a.jsx)("p",{children:"We are sorry but the page you are looking for does not exist."})]})},I=function(){return Object(a.jsxs)("div",{className:"min-vh-100 d-flex flex-column justify-content-center align-items-center",children:[Object(a.jsx)("h1",{children:"Best RCP App"}),Object(a.jsx)(j.b,{to:"/login",children:Object(a.jsx)("button",{className:"btn btn-lg btn-primary",children:"LOGIN"})})]})},P=n(39),E=function(e){var t=e.component,n=e.authed,c=Object(P.a)(e,["component","authed"]);return Object(a.jsx)(m.b,Object(o.a)(Object(o.a)({},c),{},{render:function(e){return!0===n?Object(a.jsx)(t,Object(o.a)(Object(o.a)({},e),c)):Object(a.jsx)(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},L=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(a.jsx)("div",{className:"min-vh-100 d-flex flex-column",children:Object(a.jsx)(j.a,{basename:"/",children:Object(a.jsxs)(m.d,{children:[Object(a.jsx)(m.b,{exact:!0,path:"/",render:function(e){return Object(a.jsx)(I,Object(o.a)({},e))}}),Object(a.jsx)(m.b,{path:d,render:function(e){return Object(a.jsx)(S,Object(o.a)(Object(o.a)({},e),{},{setCurrentUser:s}))}}),Object(a.jsx)(E,{authed:null!==n,currentUser:n,path:u,component:F}),Object(a.jsx)(m.b,{component:A})]})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};l.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),B()}},[[55,1,2]]]);
//# sourceMappingURL=main.4cc28ea1.chunk.js.map